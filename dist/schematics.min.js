!function e(t,n,r){function o(i,u){if(!n[i]){if(!t[i]){var f="function"==typeof require&&require;if(!u&&f)return f(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var s=n[i]={exports:{}};t[i][0].call(s.exports,function(e){var n=t[i][1][e];return o(n?n:e)},s,s.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){r(this,e),this._schema=t,this._typeOptions=["String","Number","Date","Array","Object","Boolean"]}return o(e,[{key:"_getValueType",value:function(e){var t={}.toString.call(e);return t.match(/\s(\w+)/)[1]}},{key:"checkParamsValid",value:function(e,t){var n=this._schema,r=this,o=function a(e,n){for(var o in e){var i=e[o],u=n[o],f=r._getValueType(i);"undefined"==typeof u&&i.optional!==!0&&t({valid:!1,message:'Param "'+o+'" is required'});var c="Object"===f&&"undefined"!=typeof i.type;if("String"===f&&(c=!0),c){var s="String"===f?i:i.type,p=r._getValueType(u);if(p!==s){if("Undefined"===p&&i.optional===!0)continue;t({valid:!1,message:'Param "'+o+'" should be of type '+s})}}else a(i,u)}};o(n,e),t({valid:!0})}}]),e}();n["default"]=a},{}],2:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("./SchemaParser"),f=r(u),c=e("./http"),s=r(c),p=function(){function e(t){var n=this;return o(this,e),this._publicsMethods={get:function(e,t){var n=t._get,r=this._parseEndpointStr(n.href,e);return(0,s["default"])({url:r,dataType:"json"})},post:function(e,t){return n._doRequestWithParams("post",e,t)},put:function(e,t){return n._doRequestWithParams("put",e,t)},"delete":function(e,t){return n._doRequestWithParams("delete",e,t)}},new Promise(function(e,r){return n._getSchema(t,e,r)})}return i(e,[{key:"_doRequestWithParams",value:function(e,t,n){var r=n["_"+e],o=new f["default"](r.params);return new Promise(function(n,a){o.checkParamsValid(t,function(t){if(!t.valid)throw new Error(t.message);(0,s["default"])({type:e,url:r.href,dataType:"json"}).then(n)["catch"](a)})})}},{key:"_getSchema",value:function(e,t,n){var r=this;(0,s["default"])({url:e,dataType:"json"}).then(function(e){r._storeEndpoints(e),t(r)})["catch"](n)}},{key:"_storeEndpoints",value:function(e){var t=this,n=function(n){var r=e[n];if("string"==typeof r){var o=function(){var e={},o=r;return e._get={href:o},e.get=function(n){return t._publicsMethods.get.apply(t,[n,e])},t[n]=e,{v:"continue"}}();if("object"===("undefined"==typeof o?"undefined":a(o)))return o.v}var i=function(e){var n=r[e];if("string"==typeof n){if("get"!==e)throw new Error("Expected an Object for method "+e+', instead found string "'+n);var o=n;r["_"+e]={href:o},r[e]=function(n){return t._publicsMethods[e].apply(t,[n,r])}}else r["_"+e]=n,r[e]=function(n){return t._publicsMethods[e].apply(t,[n,r])}};for(var u in r)i(u);t[n]=r};for(var r in e){n(r)}}},{key:"_parseEndpointStr",value:function(e,t){var n=this._getUrlEndpointParamNames(e),r=n.required,o=n.optional;r.forEach(function(n){if("undefined"==typeof t[n])throw new Error('Param "'+n+'" is required for endpoint '+e)});for(var a in t)if(-1===r.indexOf(a)&&-1===o.indexOf(a))throw new Error('Param "'+a+'" is not not found in the schema for endpoint '+e);return r.forEach(function(n){var r=t[n];e=e.replace(":"+n,r)}),o.forEach(function(n){var r=t[n],o=new RegExp("(\\?|\\&)"+n);e="undefined"!=typeof r?e.replace(o,"$1"+n+"="+r):e.replace(o,"")}),e}},{key:"_getUrlEndpointParamNames",value:function(e,t){var n=(e.replace(/http(s)?\:\/\//,""),e.match(/\:([^\/\:\?]+)/g)||[]),r=e.match(/(\?|\&)([^\&]+)/g)||[];return n=n.map(function(e){return e.replace(/\:/g,"")}),r=r.map(function(e){return e.replace(/\&|\?/g,"")}),{required:n,optional:r}}}]),e}();n["default"]=p},{"./SchemaParser":1,"./http":3}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};n["default"]=function(e){var t=function(t,n){var o=new XMLHttpRequest,a=e.data,i=e.dataType;o.onreadystatechange=function(){if(4===o.readyState){var e,r=o.responseText;if("json"===i)try{e=JSON.parse(r)}catch(a){e=r}else e=r;200===o.status?"function"==typeof t&&t(e,o):"function"==typeof n&&n(e,o)}};var u=void 0!==e.type?e.type.toUpperCase():"GET",f=["POST","PUT","DELETE"];o.open(u,e.url,!0),-1!==f.indexOf(u)&&("object"===("undefined"==typeof a?"undefined":r(a))?o.setRequestHeader("Content-Type","application/json"):o.setRequestHeader("Content-Type","application/x-www-form-urlencoded")),"json"!==i||"object"!==("undefined"==typeof a?"undefined":r(a))||Array.isArray(a)||(a=JSON.stringify(a)),o.send(a)};return new Promise(t)}},{}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=e("./Schematics"),a=r(o);window.Schematics=a["default"]},{"./Schematics":2}]},{},[4]);