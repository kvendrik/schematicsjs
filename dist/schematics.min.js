!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=n(o);"undefined"!=typeof window&&(window.Schematics=a["default"]),t["default"]=a["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(2),c=n(u),f=r(3),s=n(f),l=function(){function e(t,r){var n=this;if(o(this,e),"string"!=typeof t&&"function"!=typeof t||"function"!=typeof r)return void this._throwError("Please provide both a schema url or get method and a http method");var a=new s["default"],i=this;return this._http=r,this._publicsMethods={get:function(e,t,r){var n=this,o=r._get,u=a.parseEndpointStr(o.href,e);return u&&u.success?("undefined"!=typeof t&&(u.queryData["return_fields[]"]=t),new Promise(function(e,t){i._http({url:u.endpointUrl,data:u.queryData}).then(function(r){return n._processGetRes(r,e,t)})["catch"](t)})):new Promise(function(e,t){return n._rejectPromise(t,u)})},post:function(e,t){return n._doRequestWithParams("post",e,t)},put:function(e,t){return n._doRequestWithParams("put",e,t)},"delete":function(e,t){return n._doRequestWithParams("delete",e,t)}},"function"==typeof t?new Promise(function(e,o){new Promise(function(e,n){t(e,n,r)}).then(function(t){return n._processGetRes(t,e,o)})["catch"](o)}):new Promise(function(e,r){i._http({url:t}).then(function(t){return n._processGetRes(t,e,r)})["catch"](r)})}return i(e,[{key:"_throwError",value:function(e){var t=new Error(e);if(!console||!console.error)throw t;console.error(t)}},{key:"_rejectPromise",value:function(e,t){var r={internal:!0,errorType:t.errorType,message:t.message};"TypeError"===t.errorType&&(r.expectedType=t.expectedType,r.gotType=t.gotType),e(r)}},{key:"_processGetRes",value:function(e,t,r){if(e&&"undefined"!=typeof e.$schema){var n=e.$schema,o=this._validateSchema(n);if(o){var a=this._constructAPIObject(n);a?t({api:a,body:e}):this._rejectPromise(r,details)}else this._rejectPromise(r,o.error)}else t({body:e})}},{key:"_doRequestWithParams",value:function(e,t,r){var n=this,o=r["_"+e],a=new c["default"](o.params);return new Promise(function(r,i){a.checkParamsValid(t,function(a){a.valid?n._http({type:e,url:o.href,data:t}).then(r)["catch"](i):n._rejectPromise(i,a)})})}},{key:"_validateSchema",value:function(e){var t="undefined"==typeof e?"undefined":a(e);return"object"!==t?{success:!1,error:{errorType:"TypeError",message:"Thats not a valid schema. Expected type object, got type "+t,expectedType:"Object",gotType:t}}:!0}},{key:"_constructAPIObject",value:function(e){var t=this,r={getSchema:function(){return e}},n=function(n){var o=e[n];if("string"==typeof o){var i=function(){var e={},a=o;return e._get={href:a},e.get=function(r,n){return t._publicsMethods.get.apply(t,[r,n,e])},r[n]=e,{v:"continue"}}();if("object"===("undefined"==typeof i?"undefined":a(i)))return i.v}var u=function(e){var r=o[e];if("string"==typeof r){if("get"!==e)return{v:{v:{success:!1,errorType:"TypeError",message:"Expected an Object for method "+e+', instead found string "'+r,expectedType:"Object",gotType:"String"}}};var n=r;o["_"+e]={href:n},o[e]=function(r){return t._publicsMethods[e].apply(t,[r,o])}}else o["_"+e]=r,o[e]=function(r){return t._publicsMethods[e].apply(t,[r,o])}};for(var c in o){var f=u(c);if("object"===("undefined"==typeof f?"undefined":a(f)))return f.v}r[n]=o};for(var o in e){var i=n(o);switch(i){case"continue":continue;default:if("object"===("undefined"==typeof i?"undefined":a(i)))return i.v}}return r}}]),e}();t["default"]=l},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){r(this,e),this._schema=t}return n(e,[{key:"_getValueType",value:function(e){var t={}.toString.call(e);return t.match(/\s(\w+)/)[1]}},{key:"checkParamsValid",value:function(e,t){var r=this._schema,n=!1;self=this;var o=function a(e,r){for(var o in e){var i=e[o],u=r[o],c=self._getValueType(i);if("undefined"==typeof u&&i.optional!==!0)return t({valid:!1,errorType:"Error",message:'Param "'+o+'" is required'}),void(n=!0);var f="Object"===c&&"undefined"!=typeof i.type;if("String"===c&&(f=!0),f){var s="String"===c?i:i.type,l=self._getValueType(u);if(l!==s){if("Undefined"===l&&i.optional===!0)continue;return t({valid:!1,errorType:"TypeError",message:'Param "'+o+'" should be of type '+s,expectedType:s,gotType:l}),void(n=!0)}}else a(i,u)}};o(r,e),n||t({valid:!0})}}]),e}();t["default"]=o},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){r(this,e)}return n(e,[{key:"parseEndpointStr",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=this._getUrlEndpointParamNames(e),n=this._validateParams(e,t,r);if(!n.success)return n;var o=this._parseEndpointUrl(e,t,r),a=o.endpointUrl,i=o.queryData;return{success:!0,endpointUrl:a,queryData:i}}},{key:"_parseEndpointUrl",value:function(e,t,r){var n=r.url,o=r.query,a=e;n.required.forEach(function(e){var r=t[e];a=a.replace("{"+e+"}",r)}),n.optional.forEach(function(e){var r=t[e];a="undefined"!=typeof r?a.replace("{/"+e+"}","/"+r):a.replace("{/"+e+"}","")});var i={};return o.optional.forEach(function(e){var r=t[e],n=new RegExp("{?(\\?|\\,)"+e+"}?");"undefined"!=typeof r&&(i[e]=r),a=a.replace(n,"")}),{endpointUrl:a,queryData:i}}},{key:"_validateParams",value:function(e,t,r){var n=r.url,o=r.query,a=!0,i=!1,u=void 0;try{for(var c,f=n.required[Symbol.iterator]();!(a=(c=f.next()).done);a=!0)if(name=c.value,"undefined"==typeof t[name])return{success:!1,errorType:"Error",message:'Param "'+name+'" is required for endpoint '+e}}catch(s){i=!0,u=s}finally{try{!a&&f["return"]&&f["return"]()}finally{if(i)throw u}}for(var l in t)if(-1===n.required.indexOf(l)&&-1===n.optional.indexOf(l)&&-1===o.optional.indexOf(l))return{success:!1,errorType:"Error",message:'Param "'+l+'" is not not found in the schema for endpoint '+e};return{success:!0}}},{key:"_getUrlEndpointParamNames",value:function(e){var t=(e.replace(/http(s)?\:\/\//,""),e.match(/\/\{([^\/\:\?]+)\}/g)||[]),r=e.match(/\{\/([^\{\}\?]+)\}/g)||[],n=e.match(/(\?|\,)([^\,\}]+)/g)||[],o=function(e){return e.replace(/\{|\}/g,"").replace("/","")};return t=t.map(o),r=r.map(o),n=n.map(function(e){return e.replace(/\,|\?/g,"")}),{url:{required:t,optional:r},query:{optional:n}}}}]),e}();t["default"]=o}]);