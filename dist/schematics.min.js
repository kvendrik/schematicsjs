!function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=t(1),i=n(o);"undefined"!=typeof window&&(window.Schematics=i["default"]),r["default"]=i["default"]},function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),u=t(2),c=n(u),f=void 0,s=function(){function e(r,t){var n=this;return o(this,e),"string"==typeof r&&"function"==typeof t||this._throwError("Please provide both a schema url String and a http method"),f=t,this._publicsMethods={get:function(e,r,t){var n=this,o=t._get,i=this._parseEndpointStr(o.href,e);return i.success?("undefined"!=typeof r&&(i.queryData["return_fields[]"]=r),f({url:i.endpointUrl,data:i.queryData})):new Promise(function(e,r){n._rejectPromise(r,i)})},post:function(e,r){return n._doRequestWithParams("post",e,r)},put:function(e,r){return n._doRequestWithParams("put",e,r)},"delete":function(e,r){return n._doRequestWithParams("delete",e,r)}},new Promise(function(e,t){return n._getSchema(r,e,t)})}return a(e,[{key:"_throwError",value:function(e){var r=new Error(e);if(!console||!console.error)throw r;console.error(r)}},{key:"_rejectPromise",value:function(e,r){var t={internal:!0,errorType:r.errorType,message:r.message};"TypeError"===r.errorType&&(t.expectedType=r.expectedType,t.gotType=r.gotType),e(t)}},{key:"_doRequestWithParams",value:function(e,r,t){var n=this,o=t["_"+e],i=new c["default"](o.params);return new Promise(function(t,a){i.checkParamsValid(r,function(i){i.valid?f({type:e,url:o.href,data:r}).then(t)["catch"](a):n._rejectPromise(a,i)})})}},{key:"_getSchema",value:function(e,r,t){var n=this;f({url:e}).then(function(e){var o="undefined"==typeof e?"undefined":i(e);"object"!==o&&n._rejectPromise(t,{errorType:"TypeError",message:"Thats not a valid schema. Expected type object, got type "+o,expectedType:"Object",gotType:o});var a=n._storeEndpoints(e);a.success?(n.getSchema=function(){return e},r(n)):n._rejectPromise(t,a)})["catch"](t)}},{key:"_storeEndpoints",value:function(e){var r=this,t=function(t){var n=e[t];if("string"==typeof n){var o=function(){var e={},o=n;return e._get={href:o},e.get=function(t,n){return r._publicsMethods.get.apply(r,[t,n,e])},r[t]=e,{v:"continue"}}();if("object"===("undefined"==typeof o?"undefined":i(o)))return o.v}var a=function(e){var t=n[e];if("string"==typeof t){if("get"!==e)return{v:{v:{success:!1,errorType:"TypeError",message:"Expected an Object for method "+e+', instead found string "'+t,expectedType:"Object",gotType:"String"}}};var o=t;n["_"+e]={href:o},n[e]=function(t){return r._publicsMethods[e].apply(r,[t,n])}}else n["_"+e]=t,n[e]=function(t){return r._publicsMethods[e].apply(r,[t,n])}};for(var u in n){var c=a(u);if("object"===("undefined"==typeof c?"undefined":i(c)))return c.v}r[t]=n};for(var n in e){var o=t(n);switch(o){case"continue":continue;default:if("object"===("undefined"==typeof o?"undefined":i(o)))return o.v}}return{success:!0}}},{key:"_parseEndpointStr",value:function(e,r){for(var t=this._getUrlEndpointParamNames(e),n=t.required,o=t.optional,i=0,a=n.length;a>i;i++){var u=n[i];if("undefined"==typeof r[u])return{success:!1,errorType:"Error",message:'Param "'+u+'" is required for endpoint '+e}}for(var c in r)if(-1===n.indexOf(c)&&-1===o.indexOf(c))return{success:!1,errorType:"Error",message:'Param "'+c+'" is not not found in the schema for endpoint '+e};n.forEach(function(t){var n=r[t];e=e.replace(":"+t,n)});var f={};return o.forEach(function(t){var n=r[t],o=new RegExp("(\\?|\\&)"+t);"undefined"!=typeof n&&(f[t]=n),e=e.replace(o,"")}),{success:!0,endpointUrl:e,queryData:f}}},{key:"_getUrlEndpointParamNames",value:function(e,r){var t=(e.replace(/http(s)?\:\/\//,""),e.match(/\:([^\/\:\?]+)/g)||[]),n=e.match(/(\?|\&)([^\&]+)/g)||[];return t=t.map(function(e){return e.replace(/\:/g,"")}),n=n.map(function(e){return e.replace(/\&|\?/g,"")}),{required:t,optional:n}}}]),e}();r["default"]=s},function(e,r){"use strict";function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),o=function(){function e(r){t(this,e),this._schema=r,this._typeOptions=["String","Number","Date","Array","Object","Boolean"]}return n(e,[{key:"_getValueType",value:function(e){var r={}.toString.call(e);return r.match(/\s(\w+)/)[1]}},{key:"checkParamsValid",value:function(e,r){var t=this._schema,n=!1;self=this;var o=function i(e,t){for(var o in e){var a=e[o],u=t[o],c=self._getValueType(a);if("undefined"==typeof u&&a.optional!==!0)return r({valid:!1,errorType:"Error",message:'Param "'+o+'" is required'}),void(n=!0);var f="Object"===c&&"undefined"!=typeof a.type;if("String"===c&&(f=!0),f){var s="String"===c?a:a.type,p=self._getValueType(u);if(p!==s){if("Undefined"===p&&a.optional===!0)continue;return r({valid:!1,errorType:"TypeError",message:'Param "'+o+'" should be of type '+s,expectedType:s,gotType:p}),void(n=!0)}}else i(a,u)}};o(t,e),n||r({valid:!0})}}]),e}();r["default"]=o}]);